
# inputData = [['VALUE', '3', '_'],['ADD', '3', '4'],['SUB', '$0', '$1'],['MULT', '3', '4']]
# inputData = [['MULT', '$5', '$2'],['ADD', '$5', '$0'],['VALUE', '12', '_'],['ADD', '$2', '$2'],['MULT', '$3', '$2'],['SUB', '$3', '$2']]
# inputData = [['SUB', '$47', '$9'], ['SUB', '44', '$59'], ['ADD', '$97', '$67'], ['ADD', '$1', '$1'], ['SUB', '$57', '$67'], ['ADD', '$47', '$97'], ['ADD', '$59', '$59'], ['SUB', '$50', '$83'], ['SUB', '$3', '$93'], ['SUB', '$4', '$74'], ['SUB', '$38', '$0'], ['ADD', '$29', '$96'], ['SUB', '$46', '$97'], ['SUB', '$5', '$98'], ['SUB', '$87', '$66'], ['SUB', '$86', '$25'], ['SUB', '$1', '$98'], ['SUB', '$84', '$56'], ['ADD', '$38', '$78'], ['ADD', '$46', '$34'], ['ADD', '$5', '$76'], ['SUB', '$3', '$93'], ['ADD', '$19', '$31'], ['ADD', '$97', '$77'], ['VALUE', '$54', '_'], ['SUB', '$6', '$6'], ['ADD', '$98', '$2'], ['ADD', '$59', '$67'], ['SUB', '$36', '$86'], ['SUB', '$98', '$26'], ['SUB', '$16', '$7'], ['VALUE', '$67', '_'], ['ADD', '$11', '$84'], ['VALUE', '$63', '_'], ['ADD', '$3', '$6'], ['VALUE', '$44', '_'], ['SUB', '$68', '$5'], ['ADD', '$7', '$58'], ['ADD', '$50', '$82'], ['ADD', '$88', '-936'], ['ADD', '$43', '$47'], ['ADD', '$58', '842'], ['SUB', '$80', '$46'], ['SUB', '$33', '$96'], ['SUB', '$43', '$46'], ['ADD', '$2', '$8'], ['ADD', '$59', '$9'], ['VALUE', '$2', '_'], ['SUB', '$65', '$30'], ['ADD', '135', '$65'], ['ADD', '$71', '$93'], ['ADD', '$96', '$67'], ['ADD', '$6', '$38'], ['SUB', '$5', '$8'], ['SUB', '$67', '$1'], ['ADD', '$4', '$71'], ['VALUE', '$67', '_'], ['SUB', '$93', '$54'], ['SUB', '$51', '$3'], ['ADD', '993', '-871'], ['ADD', '$6', '$6'], ['SUB', '$71', '$65'], ['ADD', '$25', '$60'], ['VALUE', '$59', '_'], ['ADD', '$6', '$51'], ['SUB', '$63', '$97'], ['VALUE', '$67', '_'], ['SUB', '3', '$59'], ['ADD', '$88', '$3'], ['SUB', '$83', '$53'], ['SUB', '$50', '$49'], ['ADD', '$60', '865'], ['VALUE', '$53', '_'], ['SUB', '$29', '$44'], ['SUB', '$96', '$25'], ['ADD', '$21', '$77'], ['SUB', '$14', '$30'], ['SUB', '$27', '$50'], ['ADD', '$51', '$5'], ['SUB', '$40', '$72'], ['VALUE', '$90', '_'], ['ADD', '$87', '$42'], ['ADD', '$9', '$47'], ['SUB', '$97', '$1'], ['ADD', '$21', '$44'], ['ADD', '$78', '$94'], ['ADD', '$21', '$71'], ['ADD', '-730', '$67'], ['SUB', '$21', '$89'], ['SUB', '$83', '$25'], ['ADD', '$47', '$84'], ['ADD', '$6', '$65'], ['ADD', '$32', '$22'], ['ADD', '$27', '$59'], ['ADD', '$63', '$11'], ['ADD', '$65', '$60'], ['ADD', '$59', '$6'], ['SUB', '$1', '$27'], ['ADD', '$27', '$83'], ['SUB', '$19', '$61']]
inputData = [['SUB', '$33', '$64'], ['ADD', '$60', '$60'], ['ADD', '$61', '$61'], ['SUB', '$76', '$80'], ['SUB', '$25', '$59'], ['ADD', '$58', '$28'], ['ADD', '$88', '$59'], ['ADD', '$32', '$32'], ['ADD', '$83', '$21'], ['ADD', '$69', '$39'], ['ADD', '$57', '$64'], ['ADD', '$26', '$26'], ['ADD', '$1', '$1'], ['SUB', '$62', '$68'], ['ADD', '$73', '$1'], ['ADD', '$50', '$27'], ['SUB', '$24', '$2'], ['ADD', '$14', '$12'], ['ADD', '$10', '$89'], ['SUB', '$67', '$35'], ['ADD', '$58', '$58'], ['ADD', '$7', '$7'], ['SUB', '$0', '$89'], ['ADD', '$20', '$20'], ['SUB', '$43', '$61'], ['SUB', '$53', '$11'], ['ADD', '$37', '$37'], ['ADD', '$82', '$47'], ['ADD', '$90', '$2'], ['ADD', '$89', '$89'], ['ADD', '$85', '$85'], ['SUB', '$91', '$47'], ['ADD', '$69', '$69'], ['SUB', '$46', '$86'], ['SUB', '$42', '$20'], ['ADD', '$12', '$12'], ['ADD', '$56', '$8'], ['ADD', '$72', '$72'], ['ADD', '$9', '$32'], ['ADD', '$30', '$77'], ['ADD', '$80', '$48'], ['ADD', '$79', '$81'], ['SUB', '$16', '$58'], ['SUB', '$44', '$56'], ['SUB', '$63', '$21'], ['ADD', '$20', '$5'], ['SUB', '$49', '$81'], ['ADD', '$54', '$54'], ['ADD', '$29', '$18'], ['SUB', '$34', '$23'], ['ADD', '$47', '$47'], ['SUB', '$74', '$32'], ['SUB', '$17', '$72'], ['SUB', '$71', '$26'], ['ADD', '$59', '$59'], ['ADD', '$15', '$68'], ['ADD', '$21', '$21'], ['ADD', '$86', '$41'], ['ADD', '$2', '$2'], ['ADD', '$11', '$11'], ['ADD', '$80', '$80'], ['ADD', '$56', '$56'], ['SUB', '$31', '$50'], ['SUB', '$51', '$7'], ['ADD', '$86', '$86'], ['ADD', '$72', '$35'], ['SUB', '$75', '$30'], ['SUB', '$70', '$12'], ['ADD', '$50', '$50'], ['ADD', '$30', '$30'], ['SUB', '$84', '$1'], ['SUB', '$52', '$37'], ['VALUE', '1', '_'], ['ADD', '$40', '$60'], ['SUB', '$66', '$69'], ['SUB', '$13', '$85'], ['SUB', '$22', '$29'], ['ADD', '$55', '$85'], ['ADD', '$37', '$65'], ['ADD', '$23', '$45'], ['ADD', '$29', '$29'], ['ADD', '$23', '$23'], ['ADD', '$54', '$6'], ['ADD', '$38', '$7'], ['SUB', '$3', '$60'], ['ADD', '$68', '$68'], ['ADD', '$81', '$81'], ['ADD', '$78', '$26'], ['ADD', '$87', '$11'], ['ADD', '$64', '$64'], ['ADD', '$61', '$36'], ['SUB', '$4', '$54']]
N = len(inputData)
print(N)


opeMapping = {
    'VALUE': (lambda x, y: int(x)),
    'ADD': (lambda x, y: int(x)+int(y)),
    'SUB': (lambda x, y: int(x)-int(y)),
    'MULT': (lambda x, y: int(x)*int(y))
}


def compute(inputList, index):
    ope, arg1, arg2 = inputList[index]
    try:
        return opeMapping[ope](arg1, arg2)
    except Exception:
        if arg1[0] == "$":
            arg1 = compute(inputList, int(arg1[1:]))
        if arg2[0] == "$":
            arg2 = compute(inputList, int(arg2[1:]))
        inputList[index] = [ope, arg1, arg2]
        return opeMapping[ope](arg1, arg2)


for i in range(N):
    print(inputData[i])
    print(compute(inputData, i))
